<% if addresses.present? %>
	<div style='width: 1600px;'>
  	<div id="map" style='width: 800px; height: 600px;'></div>
	</div>
<% end %>

<script>
  $(document).on('turbolinks:load', function(){
		var handler = Gmaps.build('Google');

		handler.buildMap({ provider: { zoom: 13 }, internal: {id: 'map'}}, function(){
		handler.map.centerOn(<%= raw @hash.to_json %>);
	  markers = handler.addMarkers(<%= raw @hash.to_json %>);
	  handler.bounds.extendWith(markers);
	  // handler.fitMapToBounds(); // doesnt seem to be necessary
	});

});
</script>